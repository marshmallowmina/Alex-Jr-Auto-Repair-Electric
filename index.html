<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Alex Jr. Auto Repair</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Readable cursive font for hero heading only -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
        scroll-padding-top: 70px; /* prevent anchors hiding under fixed header */
      }
      body {
        font-family: "Montserrat", Arial, sans-serif;
        background: #111;
        color: #fff;
        perspective: 1200px;
        perspective-origin: center center;
        overflow-x: hidden;
      }

      /* Header */
      header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.95);
        padding: 15px 70px 15px 20px; /* reserve space on right for toggle */
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
        position: fixed;
      }
      header h1 {
        color: #ff0000;
        font-size: 1.4rem;
        transition: text-shadow 0.3s ease;
      }
      header h1:hover {
        text-shadow: 0 0 8px #ff0000, 0 0 15px #ffd200;
      }

      nav {
        display: flex;
        align-items: center;
      }
      /* Show nav by default; mobile rules will collapse */
      #siteNav {
        display: flex;
      }
      #siteNav.open {
        display: flex;
      }
      #siteNav.open a {
        display: inline-block;
      }

      /* Desktop: show full nav, no hamburger */
      @media (min-width: 769px) {
        header {
          padding: 15px 20px; /* remove extra right padding reserved for toggle */
        }
        #siteNav {
          display: flex !important;
          position: static;
          width: auto;
          background: transparent;
          padding: 0;
          border: 0;
          box-shadow: none;
          text-align: left;
        }
        #siteNav a {
          display: inline-block !important;
          margin: 0 0 0 20px;
        }
        .menu-toggle {
          display: none !important;
        }
      }
      .menu-toggle {
        display: none; /* hidden on desktop by default; mobile overrides */
        background: transparent;
        border: none;
        width: 42px;
        height: 36px;
        align-items: center;
        justify-content: center;
        gap: 5px;
        cursor: pointer;
        border-radius: 10px;
        transition: box-shadow 180ms ease, background-color 180ms ease;
        flex-direction: column; /* stack bars vertically */
        position: absolute;
        top: 12px;
        right: 14px;
      }
      .menu-toggle:hover {
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.35),
          0 0 18px rgba(255, 210, 0, 0.25);
      }
      .menu-toggle:focus-visible {
        outline: 2px solid #ffd200;
        outline-offset: 3px;
        box-shadow: 0 0 0 4px rgba(255, 210, 0, 0.15);
      }
      .menu-toggle .bar {
        display: block;
        width: 26px;
        height: 3px;
        background: linear-gradient(90deg, #ffd200, #ff3b3b);
        border-radius: 999px;
        box-shadow: 0 1px 6px rgba(255, 0, 0, 0.35);
        transition: transform 220ms ease, opacity 160ms ease,
          background 180ms ease, box-shadow 180ms ease;
      }
      /* Morph to an X when open */
      .menu-toggle[aria-expanded="true"] .bar:nth-child(1) {
        transform: translateY(8px) rotate(45deg);
      }
      .menu-toggle[aria-expanded="true"] .bar:nth-child(2) {
        opacity: 0;
      }
      .menu-toggle[aria-expanded="true"] .bar:nth-child(3) {
        transform: translateY(-8px) rotate(-45deg);
      }
      .menu-toggle[aria-expanded="true"] .bar {
        background: linear-gradient(90deg, #ff3b3b, #ffd200);
        box-shadow: 0 1px 10px rgba(255, 0, 0, 0.5);
      }
      nav a {
        margin-left: 20px;
        color: #ffd200;
        text-decoration: none;
        font-weight: bold;
        padding: 8px 6px; /* bigger tap targets */
        transition: color 0.3s, text-shadow 0.3s;
      }
      nav a:hover {
        color: #fff;
        text-shadow: 0 0 8px #ff0000, 0 0 15px #ffd200;
      }

      /* Book Appointment Button */
      .book-btn {
        background: #ff0000;
        color: #ffd200;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: bold;
        margin-left: 20px;
        cursor: pointer;
        transition: transform 0.3s, background 0.3s, box-shadow 0.3s;
      }
      .book-btn:hover {
        transform: scale(1.05);
        background: #e60000;
        box-shadow: 0 0 15px #ff0000, 0 0 30px #ffd200;
      }

      /* Sections */
      .section {
        position: relative;
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        transform-style: preserve-3d;
        padding: 100px 20px;
        text-align: center;
      }
      .inner {
        max-width: 900px;
        transform: translateZ(0) translate3d(0, 0, 0);
        transition: transform 0.4s ease-out, opacity 1s ease-out;
        opacity: 0;
      }
      .visible .inner {
        opacity: 1;
      }

      .section h2 {
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: #ffd200;
        text-transform: uppercase;
        letter-spacing: 2px;
        transition: text-shadow 0.3s;
      }
      .section h2:hover {
        text-shadow: 0 0 8px #ff0000, 0 0 15px #ffd200;
      }

      .section p {
        font-size: 1.1rem;
        line-height: 1.6;
      }

      /* About grid and Hours card */
      .about-grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 20px;
        align-items: start;
        margin-top: 10px;
        text-align: left;
      }
      .about-main {
        background: transparent;
      }
      .hours-card {
        background: #222;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
      }
      .hours-card h3 {
        color: #ffd200;
        margin-bottom: 12px;
        text-align: center;
      }
      .hours-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        grid-template-columns: 1fr auto;
        row-gap: 10px;
        column-gap: 14px;
        align-items: center;
      }
      .hours-list li {
        display: contents;
      }
      .hours-day {
        color: #eee;
        font-weight: 600;
      }
      .hours-time {
        color: #ddd;
        font-weight: 500;
      }
      @media (max-width: 900px) {
        .about-grid {
          grid-template-columns: 1fr;
        }
        .hours-card {
          margin-top: 14px;
        }
      }

      /* Locate Us two-column layout */
      .locate-grid {
        display: grid;
        grid-template-columns: 1fr 1.4fr;
        gap: 24px;
        align-items: stretch;
        margin-top: 10px;
      }
      .locate-left {
        text-align: left;
        display: flex;
        flex-direction: column;
        gap: 14px;
        justify-content: center;
      }
      .locate-right {
        min-height: 320px;
      }
      .btn-primary {
        display: inline-block;
        padding: 12px 25px;
        background: #ff0000;
        color: #ffd200;
        border-radius: 10px;
        text-decoration: none;
        font-weight: bold;
        transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
      }
      .btn-primary:hover {
        transform: scale(1.05);
        background: #e60000;
        box-shadow: 0 0 15px #ff0000, 0 0 30px #ffd200;
      }

      @media (max-width: 900px) {
        .locate-grid {
          grid-template-columns: 1fr;
        }
        .locate-right {
          min-height: 280px;
        }
        /* Toggle helpers on mobile */
        .mobile-only {
          display: block;
        }
        .desktop-only {
          display: none;
        }
      }

      /* Hero Parallax */
      .section.hero {
        overflow: hidden;
        /* Default to local hero image; JS will verify and fallback if missing */
        --hero-bg-url: url("assets/images/hero1.JPG");
      }
      /* Ensure anchor/scrollIntoView lands below fixed header */
      .section.hero {
        scroll-margin-top: var(--header-h, 70px);
      }
      .section.hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--hero-bg-url, url("assets/images/hero1.jpg"))
          center/cover no-repeat;
        /* Use CSS variable so JS can control offset while overlay remains */
        transform: translateY(var(--hero-offset, 0px)) scale(1.1);
        z-index: 1;
        transition: transform 0.2s ease-out;
      }
      /* Dark overlay to boost text contrast/readability */
      .section.hero::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.45) 40%,
          rgba(0, 0, 0, 0.6) 100%
        );
        z-index: 2; /* above image, below content */
        pointer-events: none;
      }
      .section.hero .inner {
        position: relative;
        z-index: 3; /* above overlay */
      }

      /* Hero text readability tweaks */
      .section.hero h2 {
        font-size: clamp(2.2rem, 5vw, 3.6rem);
        line-height: 1.15;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.6);
        text-transform: none; /* let cursive show natural casing */
        letter-spacing: 0; /* improve cursive readability */
        font-style: italic;
        font-weight: 700;
        font-family: "Dancing Script", "Segoe Script", "Lucida Handwriting",
          "Brush Script MT", "Comic Sans MS", cursive;
        color: #ff0000; /* make only hero heading red */
      }
      .section.hero p {
        font-size: clamp(1.05rem, 2.6vw, 1.35rem);
        line-height: 1.85;
        color: #f5f5f5;
        max-width: 48rem;
        margin: 0 auto;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);
      }

      /* Services Grid */
      .services {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 40px;
        transform: translateZ(0);
        will-change: transform;
      }
      .service-card {
        background: #222;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        transition: transform 0.25s ease, background 0.25s ease,
          box-shadow 0.25s ease;
        opacity: 0;
        transform: translateY(50px);
        transform-origin: center center;
        will-change: transform, box-shadow, background-color;
        backface-visibility: hidden;
      }
      .service-card.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .service-card:hover {
        transform: translateY(-10px) scale(1.05);
        background: #ff0000;
        box-shadow: 0 0 15px #ff0000, 0 0 30px #ffd200;
      }
      .service-card h3 {
        color: #ffd200;
        margin-bottom: 15px;
        transition: text-shadow 0.3s;
      }
      .service-card h3:hover {
        text-shadow: 0 0 8px #ff0000, 0 0 15px #ffd200;
      }

      /* Financing buttons inside a service card */
      .financing-card .finance-logos {
        display: flex;
        gap: 14px;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 8px;
      }
      .finance-btn {
        display: inline-block;
        background: transparent;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.3s, box-shadow 0.3s;
      }
      .finance-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px #ff0000, 0 0 30px #ffd200;
      }
      .finance-btn img {
        display: block;
        width: 180px;
        height: auto;
        border-radius: 12px;
      }
      @media (max-width: 420px) {
        .finance-btn img {
          width: 150px;
        }
      }

      /* Stack pairs of cards vertically and center them inside the grid cell */
      .service-stack {
        display: grid;
        gap: 20px;
        justify-items: center;
        align-content: start;
      }
      .service-stack .service-card {
        width: 100%;
      }
      /* Visibility helpers */
      .mobile-only {
        display: none;
      }
      .desktop-only {
        display: block;
      }
      /* Equalize heights and center content inside stacks */
      .service-stack .service-basic {
        min-height: 180px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .service-stack .financing-card {
        min-height: 180px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      /* Bias financing cards to the right on wide screens and center content */
      .financing-card {
        text-align: center;
        justify-self: end;
      }
      @media (min-width: 901px) {
        .financing-card {
          grid-column: -2 / -1;
        }
      }

      /* Portfolio */
      .portfolio {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        margin-top: 40px;
        transform: translateZ(0);
        will-change: transform;
      }
      .portfolio img {
        width: 280px;
        border-radius: 15px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6);
        transition: transform 0.35s ease, opacity 0.6s, box-shadow 0.3s;
        opacity: 0;
        transform: translateY(50px);
        transform-origin: center center;
        will-change: transform, box-shadow;
        backface-visibility: hidden;
      }
      .portfolio img.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .portfolio img:hover {
        transform: scale(1.08) rotate(1deg);
        box-shadow: 0 0 20px #ff0000, 0 0 35px #ffd200;
      }

      /* About section background image */
      #about {
        overflow: hidden;
        --about-bg-url: url("assets/images/about-bg.jpg");
      }
      #about::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(--about-bg-url, url("assets/images/about-bg.jpg"))
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #about.visible::before {
        opacity: 1;
      }
      #about::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.55) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #about .inner {
        position: relative;
        z-index: 3;
      }

      /* Section background images */
      #services,
      #testimonials,
      #achievements,
      #portfolio,
      #social,
      #contact,
      #locate {
        overflow: hidden;
      }

      /* Services */
      #services {
        --services-bg-url: url("assets/images/services-bg.jpg");
      }
      #services::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(--services-bg-url, url("assets/images/services-bg.jpg"))
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #services.visible::before {
        opacity: 1;
      }
      #services::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.6) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #services .inner {
        position: relative;
        z-index: 3;
      }

      /* Testimonials */
      #testimonials {
        --testimonials-bg-url: url("assets/images/testimonials-bg.jpg");
      }
      #testimonials::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(
            --testimonials-bg-url,
            url("assets/images/testimonials-bg.jpg")
          )
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #testimonials.visible::before {
        opacity: 1;
      }
      #testimonials::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.38) 0%,
          rgba(0, 0, 0, 0.62) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #testimonials .inner {
        position: relative;
        z-index: 3;
      }

      /* Achievements */
      #achievements {
        --achievements-bg-url: url("assets/images/achievements-bg.jpg");
      }
      #achievements::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(
            --achievements-bg-url,
            url("assets/images/achievements-bg.jpg")
          )
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #achievements.visible::before {
        opacity: 1;
      }
      #achievements::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.6) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #achievements .inner {
        position: relative;
        z-index: 3;
      }

      /* Portfolio (Our Work) */
      #portfolio {
        --portfolio-bg-url: url("assets/images/portfolio-bg.jpg");
      }
      #portfolio::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(
            --portfolio-bg-url,
            url("assets/images/portfolio-bg.jpg")
          )
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #portfolio.visible::before {
        opacity: 1;
      }
      #portfolio::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.6) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #portfolio .inner {
        position: relative;
        z-index: 3;
      }

      /* Social */
      #social {
        --social-bg-url: url("assets/images/social-bg.jpg");
      }
      #social::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(--social-bg-url, url("assets/images/social-bg.jpg"))
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #social.visible::before {
        opacity: 1;
      }
      #social::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.6) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #social .inner {
        position: relative;
        z-index: 3;
      }

      /* Instagram badge button */
      .insta-badge {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 12px 20px;
        border-radius: 999px;
        background: linear-gradient(45deg, #f58529, #dd2a7b, #8134af, #515bd4);
        color: #fff;
        text-decoration: none;
        font-weight: 700;
        box-shadow: 0 0 12px rgba(221, 42, 123, 0.6);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }
      .insta-badge:hover {
        transform: translateY(-2px) scale(1.03);
        box-shadow: 0 6px 18px rgba(221, 42, 123, 0.7);
      }
      .insta-icon {
        width: 18px;
        height: 18px;
        border-radius: 4px;
        background: conic-gradient(
          from 180deg,
          #f58529,
          #dd2a7b,
          #8134af,
          #515bd4,
          #f58529
        );
        position: relative;
        display: inline-block;
      }
      .insta-icon::before,
      .insta-icon::after {
        content: "";
        position: absolute;
        background: #fff;
      }
      .insta-icon::before {
        inset: 3px;
        border-radius: 3px;
        background: transparent;
        border: 2px solid #fff;
      }
      .insta-icon::after {
        width: 4px;
        height: 4px;
        border-radius: 50%;
        top: 4px;
        right: 4px;
      }

      /* Contact */
      #contact {
        --contact-bg-url: url("assets/images/contact-bg.jpg");
      }
      #contact::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(--contact-bg-url, url("assets/images/contact-bg.jpg"))
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #contact.visible::before {
        opacity: 1;
      }
      #contact::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.38) 0%,
          rgba(0, 0, 0, 0.62) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #contact .inner {
        position: relative;
        z-index: 3;
      }

      /* Locate Us */
      #locate {
        --locate-bg-url: url("assets/images/locate-bg.jpg");
      }
      #locate::before {
        content: "";
        position: absolute;
        inset: 0;
        background: var(--locate-bg-url, url("assets/images/locate-bg.jpg"))
          center/cover no-repeat;
        z-index: 1;
        transform: translateY(var(--bg-offset, 0px)) scale(1.08);
        opacity: 0;
        transition: transform 0.25s ease-out, opacity 0.8s ease;
        will-change: transform;
      }
      #locate.visible::before {
        opacity: 1;
      }
      #locate::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.35) 0%,
          rgba(0, 0, 0, 0.6) 100%
        );
        z-index: 2;
        pointer-events: none;
      }
      #locate .inner {
        position: relative;
        z-index: 3;
      }

      /* Testimonials */
      .testimonials {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }
      .testimonial-card {
        background: #222;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        opacity: 0;
        transform: translateY(50px);
        transition: transform 0.35s ease, opacity 0.6s, box-shadow 0.3s;
        text-align: left;
        transform-origin: center center;
        will-change: transform, box-shadow;
        backface-visibility: hidden;
      }
      .testimonial-card.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .testimonial-card:hover {
        box-shadow: 0 0 15px #ff0000, 0 0 30px #ffd200;
      }
      .testimonial-card blockquote {
        font-style: italic;
        color: #eee;
        line-height: 1.7;
      }
      .testimonial-card .author {
        margin-top: 12px;
        color: #ffd200;
        font-weight: 600;
      }

      /* Achievements (Stats) */
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }
      .stat {
        background: #111; /* sits on #222 background for contrast */
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        opacity: 0;
        transform: translateY(50px);
        transition: transform 0.4s ease, opacity 0.6s, box-shadow 0.3s;
      }
      .stat.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .stat-number {
        font-size: clamp(2rem, 6vw, 3.2rem);
        font-weight: 800;
        color: #ffd200;
        text-shadow: 0 0 8px rgba(255, 0, 0, 0.35);
      }
      .stat-label {
        margin-top: 8px;
        color: #ddd;
        font-weight: 600;
        letter-spacing: 0.5px;
      }

      /* Footer */
      footer {
        background: #000;
        color: #aaa;
        text-align: center;
        padding: 30px 20px;
      }
      footer p {
        margin: 5px 0;
      }

      /* Modal */
      .modal {
        display: flex;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: flex-start;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
        z-index: 2000;
      }
      .modal.show {
        opacity: 1;
        pointer-events: auto;
      }
      .modal-content {
        background: #222;
        padding: 40px 30px;
        border-radius: 20px;
        max-width: 500px;
        width: 90%;
        text-align: left;
        position: relative;
        transform: translateY(-100px);
        transition: transform 0.5s ease, opacity 0.5s ease;
        opacity: 0;
      }
      .modal.show .modal-content {
        transform: translateY(0);
        opacity: 1;
      }
      .modal-content h2 {
        color: #ffd200;
        margin-bottom: 20px;
        font-size: 2rem;
        transition: text-shadow 0.3s;
      }
      .modal-content h2:hover {
        text-shadow: 0 0 8px #ff0000, 0 0 15px #ffd200;
      }
      .modal-content label {
        display: block;
        margin-top: 15px;
        font-weight: bold;
        color: #ffd200;
      }
      .modal-content input,
      .modal-content textarea {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border-radius: 8px;
        border: none;
        transition: transform 0.3s, box-shadow 0.3s;
      }
      .modal-content input:focus,
      .modal-content textarea:focus {
        outline: none;
        transform: scale(1.02);
        box-shadow: 0 0 10px #ff0000;
      }
      .modal-content button {
        margin-top: 20px;
        background: #ff0000;
        color: #ffd200;
        border: none;
        padding: 12px 25px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        font-size: 1rem;
        transition: transform 0.3s, background 0.3s, box-shadow 0.3s;
      }
      .modal-content button:hover {
        transform: scale(1.05);
        background: #e60000;
        box-shadow: 0 0 15px #ff0000, 0 0 30px #ffd200;
      }
      .close-btn {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 1.8rem;
        color: #ffd200;
        cursor: pointer;
        transition: transform 0.3s;
      }
      .close-btn:hover {
        transform: scale(1.2);
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        header {
          position: sticky;
        }
        .menu-toggle {
          display: inline-flex; /* show hamburger on mobile */
          top: 8px;
          right: 10px; /* fine-tune for mobile */
          width: 56px;
          height: 60px;
          background: rgba(0, 0, 0, 0.6);
          border: 2px solid #ffd200;
          box-shadow: 0 0 10px rgba(255, 210, 0, 0.45),
            0 0 18px rgba(255, 0, 0, 0.25);
          backdrop-filter: blur(3px);
        }
        .menu-toggle::after {
          content: "Menu";
          font-size: 0.7rem;
          line-height: 1;
          margin-top: 4px;
          color: #ffd200;
          letter-spacing: 0.5px;
          text-transform: uppercase;
          font-weight: 700;
        }
        #siteNav {
          width: 100%;
          order: 3;
          display: none; /* collapsed by default on mobile */
          overflow-x: auto;
          white-space: nowrap;
          -webkit-overflow-scrolling: touch;
          padding-bottom: 6px;
        }
        #siteNav.open {
          display: block;
          animation: menuSlide 180ms ease-out;
        }
        #siteNav a {
          display: inline-block;
        }
        header {
          padding: 10px 70px 10px 12px; /* extra right space for absolute button */
          flex-wrap: wrap;
          gap: 8px;
        }
        header h1 {
          font-size: 1.1rem;
          flex: 1 1 100%; /* sits beneath the hamburger on its own line */
        }
        nav {
          width: 100%;
          overflow-x: auto;
          white-space: nowrap;
          -webkit-overflow-scrolling: touch;
        }
        nav a {
          font-size: 0.95rem;
          margin: 0 12px 0 0;
        }
        .book-btn {
          width: 100%;
          margin-left: 0;
          order: 3;
        }
        .section {
          height: auto;
          padding: 80px 15px;
        }
        /* Prevent hero from being squished under mobile browser UI */
        .section.hero {
          min-height: calc(100svh - var(--header-h, 70px));
          padding-top: calc(var(--header-h, 70px) + 20px);
        }
        .section.hero::before {
          transform: scale(1.05) !important;
        }
        .services {
          /* Switch to flex column so we can reorder without duplicates */
          display: flex;
          flex-direction: column;
          gap: 20px;
        }
        /* Flatten stacked pairs into the main flow on mobile */
        .service-stack {
          display: contents;
        }
        /* Ensure Regular Maintenance appears before both financing cards */
        .services .maintenance-card {
          order: 2;
        }
        /* Place both financing logos after Regular Maintenance on mobile */
        .services .financing-card {
          order: 3;
        }
        .portfolio {
          flex-direction: column;
          align-items: center;
        }
        .portfolio img {
          width: 100%;
          max-width: 420px;
          height: auto;
        }
        .section:not(.no-3d) .inner {
          transform: none !important;
        }
        /* Make bars slightly thicker and wider on mobile for visibility */
        .menu-toggle .bar {
          width: 30px;
          height: 4px;
        }
        /* Stronger glow when menu is open */
        .menu-toggle[aria-expanded="true"] {
          box-shadow: 0 0 12px rgba(255, 210, 0, 0.6),
            0 0 24px rgba(255, 0, 0, 0.35);
          border-color: #ff3b3b;
        }

        /* Improve phone number legibility on mobile */
        .phone-number {
          color: #ffd200;
          font-weight: 700;
          font-size: 1.1rem;
        }
        .phone-number a {
          color: inherit;
          text-decoration: none;
        }
        .phone-number a:focus-visible,
        .phone-number a:active {
          text-decoration: underline;
          outline: none;
        }
      }

      /* Slide-down animation for mobile nav */
      @keyframes menuSlide {
        from {
          opacity: 0;
          transform: translateY(-8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Extra-small screens */
      @media (max-width: 360px) {
        header h1 {
          font-size: 1rem;
        }
        /* Hide the label on very small screens to save space */
        .menu-toggle::after {
          content: "";
        }
        .section.hero h2 {
          font-size: clamp(1.7rem, 8vw, 2.4rem);
          line-height: 1.2;
        }
        .section.hero p {
          font-size: 0.95rem;
        }
      }
      /* Dynamic anchor offset based on measured header height */
      html {
        scroll-padding-top: var(--header-h, 70px);
      }
      /* Temporarily disable smooth scroll when forcing top on mobile */
      html.no-smooth {
        scroll-behavior: auto !important;
      }
    </style>
    <script>
      // Early: on mobile reloads, disable scroll restoration and force top before body runs
      (function () {
        function isMobile() {
          var w =
            window.innerWidth ||
            document.documentElement.clientWidth ||
            screen.width ||
            0;
          return w <= 768;
        }
        var navType = "";
        try {
          var n =
            (performance.getEntriesByType &&
              performance.getEntriesByType("navigation")[0]) ||
            null;
          navType =
            n && n.type
              ? n.type
              : performance.navigation && performance.navigation.type === 1
              ? "reload"
              : "";
        } catch (e) {}
        if (!isMobile() || navType !== "reload") return;
        try {
          if ("scrollRestoration" in history)
            history.scrollRestoration = "manual";
        } catch (e) {}
        // Avoid smooth animation during the forced scroll
        document.documentElement.classList.add("no-smooth");
        // Eagerly jump to top now and on next tick
        try {
          window.scrollTo(0, 0);
        } catch (e) {}
        setTimeout(function () {
          try {
            window.scrollTo(0, 0);
          } catch (e) {}
        }, 0);
      })();
    </script>
  </head>
  <body>
    <header>
      <h1>Alex Jr. Auto Repair & Electric</h1>
      <button
        class="menu-toggle"
        id="menuToggle"
        aria-controls="siteNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
      <nav id="siteNav">
        <a href="#about">About</a>
        <a href="#services">Services</a>
        <a href="#testimonials">Testimonials</a>
        <a href="#achievements">Achievements</a>
        <a href="#portfolio">Portfolio</a>
        <a href="#contact">Contact</a>
        <a href="#locate">Locate Us</a>
      </nav>
      <a
        class="book-btn"
        id="bookBtn"
        href="https://booking.shopgenie.io/?shop=alex-jrs-auto-repair-and-elec-3817982516&preselect_account=alex-jrs-auto-repair-and-elec-3817982036&hl=en-US&gei=epLcaIvSBda7ur8Pjrug0AY&rwg_token=ACgRB3c1NNwqWylxYgtfRP2z8dpBXWCYJh2s1ri6elHUOgx11za-7G19K5YZPCJxGaM7xTB4TyGm_2Ehm0G7RyOra3CaXSCFGQ%3D%3D"
        target="_blank"
        rel="noopener noreferrer"
      >
        Book Appointment
      </a>
    </header>

    <!-- Hero Section -->
    <div class="section hero" id="hero">
      <div class="inner">
        <h2>Alex Jr. Auto Repair & Electric</h2>
        <p>Where quality meets care, and your satisfaction drives us.</p>
      </div>
    </div>

    <!-- About Section -->
    <div id="about" class="section">
      <div class="inner">
        <h2>About Us</h2>
        <div class="about-grid">
          <div class="about-main">
            <p>
              With over 20 years of experience, Alex Jr. Auto Repair & Electric
              proudly offers expert auto repair services in your community. Our
              specialization includes brake repair, engine diagnostics,
              electrical systems, and scheduled maintenance. Our certified
              mechanics in Long Beach are committed to delivering prompt,
              affordable, and transparent service for all vehicle makes and
              models. Whether you require assistance with a check engine light,
              battery replacement, or comprehensive vehicle repair, we are here
              to assist you. Utilizing state-of-the-art equipment and
              maintaining a reputation for reliable workmanship, we are your
              premier auto service provider. For trusted and high-quality car
              service, please call or visit Alex Jr. Auto Repair & Electric
              today.
            </p>
          </div>
          <aside class="hours-card" aria-label="Business Hours">
            <h3>Business Hours</h3>
            <ul class="hours-list">
              <li>
                <span class="hours-day">Sunday</span
                ><span class="hours-time">Closed</span>
              </li>
              <li>
                <span class="hours-day">Monday</span
                ><span class="hours-time">08:00 AM - 6:00 PM</span>
              </li>
              <li>
                <span class="hours-day">Tuesday</span
                ><span class="hours-time">08:00 AM - 6:00 PM</span>
              </li>
              <li>
                <span class="hours-day">Wednesday</span
                ><span class="hours-time">08:00 AM - 6:00 PM</span>
              </li>
              <li>
                <span class="hours-day">Thursday</span
                ><span class="hours-time">08:00 AM - 6:00 PM</span>
              </li>
              <li>
                <span class="hours-day">Friday</span
                ><span class="hours-time">08:00 AM - 6:00 PM</span>
              </li>
              <li>
                <span class="hours-day">Saturday</span
                ><span class="hours-time">08:00 AM - 4:00 PM</span>
              </li>
            </ul>
          </aside>
        </div>
      </div>
    </div>

    <!-- Services Section -->
    <div id="services" class="section no-3d" style="background: #222">
      <div class="inner">
        <h2>Our Services</h2>
        <div class="services">
          <div class="service-card">
            <h3>Electrical Repairs</h3>
            <p>
              Advanced electrical repairs to keep your vehicle at peak
              performance.
            </p>
          </div>
          <div class="service-card">
            <h3>Mechanical Repairs</h3>
            <p>Expert mechanical services for safety and reliability.</p>
          </div>
          <div class="service-stack">
            <div class="service-card service-basic ac-card">
              <h3>AC Service</h3>
              <p>
                Keep your car smooth and cool with our specialized services.
              </p>
            </div>
            <div class="service-card financing-card">
              <h3>Snap Finance</h3>
              <a
                class="finance-btn"
                href="https://snapfinance.com/find-stores?zipCode=90853&industry=TIRES_RIMS_%26_AUTO&merchantId=490312277&dbaName=Alex-Jr-Auto-Repair-And-Electric-Inc&state=CA&city=San+Pedro"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Find Snap Finance for Alex Jr. Auto Repair & Electric (opens in a new tab)"
              >
                <img
                  src="assets/images/snap-finance-logo.png"
                  alt="Snap Finance"
                  onerror="this.style.display='none'; if(this.nextElementSibling){ this.nextElementSibling.style.display='inline-block'; }"
                />
                <span class="btn-primary" style="display: none"
                  >Apply with Snap</span
                >
              </a>
            </div>
          </div>
          <div class="service-stack">
            <div class="service-card service-basic maintenance-card">
              <h3>Regular Maintenance</h3>
              <p>
                Comprehensive checks to keep your vehicle running in top
                condition.
              </p>
            </div>
            <div class="service-card financing-card">
              <h3>EasyPay Finance</h3>
              <a
                class="finance-btn"
                href="https://customerapp.easypayfinance.com/apply-now/m/0?a=1&ma=1&m=eD6f%2FNkiy7N3OSxvA8Ye7g%3D%3D&p=wwoJgh8mIXLc92ARiufL0A%3D%3D"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Apply with EasyPay Finance (opens in a new tab)"
              >
                <img
                  src="assets/images/easypay-finance-logo.png"
                  alt="EasyPay Finance"
                  onerror="this.style.display='none'; if(this.nextElementSibling){ this.nextElementSibling.style.display='inline-block'; }"
                />
                <span class="btn-primary" style="display: none"
                  >Apply with EasyPay</span
                >
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Testimonials Section -->
    <div id="testimonials" class="section no-3d" style="background: #111">
      <div class="inner">
        <h2>Testimonials</h2>
        <div class="testimonials">
          <div class="testimonial-card">
            <blockquote>
              “Wow, I’ll try to be brief, but there are lot of good things to
              say. Customer service is the best I’ve ever experienced at a
              repair shop, they were honest and transparent with their
              assessment of things my car needed beyond my water pump, and
              performed the repairs quickly and for a fair price. Great customer
              service and technician, there’s a lot of experience at this shop.
              They work to earn your business, and they have mine. ”
            </blockquote>
            <div class="author">— John R.</div>
          </div>
          <div class="testimonial-card">
            <blockquote>
              “Alex Jr Auto Repair & Electric. 10 out of 10. Prefect service and
              customer service. Prices or great on repairs. Very professional
              and I'll will be doing all of my auto repairs with them. Once
              again. Thank you Alex Jr & the team of mechanics.”
            </blockquote>
            <div class="author">— James T.</div>
          </div>
          <div class="testimonial-card">
            <blockquote>
              “So pleased with how professional and knowledgeable Alex was! They
              offered financing options that helped me get this unexpected
              repair cost covered. My car is running smoothly and I am so
              grateful to be back on the road in just 2 days from the day I
              dropped the car off. Thanks so much Alex, much success to you and
              your business. With your amazing customer service you have a
              bright future ahead of you!”
            </blockquote>
            <div class="author">— Kristen P.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Achievements / Stats Section -->
    <div id="achievements" class="section" style="background: #222">
      <div class="inner">
        <h2>Our Achievements</h2>
        <div class="stats">
          <div class="stat">
            <div class="stat-number" data-target="20" data-suffix="+">0</div>
            <div class="stat-label">Years of Experience</div>
          </div>
          <div class="stat">
            <div class="stat-number" data-target="2003" data-static="true">
              2003
            </div>
            <div class="stat-label">Serving Since</div>
          </div>
          <div class="stat">
            <div class="stat-number" data-target="95" data-suffix="%">0</div>
            <div class="stat-label">Customer Satisfaction</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Section -->
    <div id="portfolio" class="section no-3d" style="background: #111">
      <div class="inner">
        <h2>Our Work</h2>
        <div class="portfolio">
          <img
            src="assets/images/ourwork-1.jpg"
            alt="Electrical diagnostics in the engine bay"
            loading="lazy"
            onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1552519507-da3b142c6e3d?auto=format&fit=crop&w=600&q=80'"
          />
          <img
            src="assets/images/ourwork-2.jpg"
            alt="A/C service machine connected to a Ford sedan"
            loading="lazy"
            onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=600&q=80'"
          />
          <img
            src="assets/images/ourwork-3.jpg"
            alt="Interior dashboard electrical repair"
            loading="lazy"
            onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1515923152115-758a2f8d88b2?auto=format&fit=crop&w=600&q=80'"
          />
        </div>
      </div>
    </div>

    <!-- Contact Section -->
    <div id="contact" class="section" style="background: #222">
      <div class="inner">
        <h2>Contact Us</h2>
        <p class="phone-number">
          Alex Jr: <a href="tel:+15624176154">(562) 417-6154</a>
        </p>
        <p class="phone-number">
          Alex Sr: <a href="tel:+15626446021">(562) 644-6021</a>
        </p>
        <p class="phone-number">
          Office: <a href="tel:+15622530377">(562) 253-0377</a>
        </p>
        <p>Email: alexjrauto@gmail.com</p>
      </div>
    </div>

    <!-- Locate Us Section (Excluded from 3D) -->
    <div id="locate" class="section no-3d" style="background: #111">
      <div class="inner">
        <h2>Locate Us</h2>
        <div class="locate-grid">
          <div class="locate-left">
            <p>3360 Atlantic Ave, Long Beach, CA 90807</p>
            <a
              id="getDirectionsBtn"
              href="https://www.google.com/maps/dir/?api=1&destination=3360+Atlantic+Ave,+Long+Beach,+CA+90807"
              target="_blank"
              class="btn-primary"
            >
              Get Directions
            </a>
          </div>
          <div class="locate-right">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3302.071249019331!2d-118.1853223847815!3d33.81030178067838!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80c2b9e42f8b78d3%3A0x5e1f7aeb34b9d6c6!2s3360%20Atlantic%20Ave%2C%20Long%20Beach%2C%20CA%2090807!5e0!3m2!1sen!2sus!4v1696073891234!5m2!1sen!2sus"
              width="100%"
              height="100%"
              style="border: 0; border-radius: 15px"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            >
            </iframe>
          </div>
        </div>
      </div>
    </div>

    <!-- Social Section (below Locate Us) -->
    <div id="social" class="section no-3d" style="background: #111">
      <div class="inner">
        <h2>Follow Us</h2>
        <p>Stay connected and see our latest work on Instagram.</p>
        <div style="margin-top: 20px">
          <a
            class="insta-badge"
            href="https://www.instagram.com/alexjrsautorepair/"
            target="_blank"
            rel="noopener noreferrer"
          >
            <span class="insta-icon" aria-hidden="true"></span>
            <span>Follow on Instagram</span>
          </a>
        </div>
      </div>
    </div>

    <footer>
      <p>&copy; 2025 Alex Jr. Auto Repair & Electric. All Rights Reserved.</p>
      <p></p>
    </footer>

    <!-- Modal removed: booking handled by external link -->

    <script>
      /* 3D Scroll Animation + section visibility + background parallax */
      const sections = document.querySelectorAll(".section");
      function update3D() {
        const vh = window.innerHeight;
        const isMobile = window.innerWidth <= 768; // skip heavy 3D on mobile
        sections.forEach((section) => {
          const inner = section.querySelector(".inner");
          const rect = section.getBoundingClientRect();

          // Mark section visible when any part in viewport
          if (rect.top < vh && rect.bottom > 0) {
            section.classList.add("visible");
          }

          // Background parallax for all sections with ::before images
          const centerDelta = rect.top + rect.height / 2 - vh / 2;
          const parallax = Math.max(-50, Math.min(50, -centerDelta * 0.06));
          section.style.setProperty("--bg-offset", `${parallax}px`);

          // Apply subtle 3D only when allowed
          if (!isMobile && !section.classList.contains("no-3d") && inner) {
            const offset = rect.top - vh / 2;
            inner.style.transform = `translateZ(${-offset * 0.3}px)`;
          }
        });
        requestAnimationFrame(update3D);
      }
      update3D();

      /* Hero Parallax - update CSS var consumed by ::before */
      const heroBg = document.querySelector(".section.hero");
      window.addEventListener("scroll", () => {
        if (!heroBg) return;
        const scrollY = window.scrollY;
        heroBg.style.setProperty("--hero-offset", `${scrollY * 0.3}px`);
      });

      // Modal removed; Book button is a direct link

      /* Mobile nav toggle */
      (function () {
        const toggle = document.getElementById("menuToggle");
        const nav = document.getElementById("siteNav");
        if (!toggle || !nav) return;
        toggle.addEventListener("click", () => {
          const isOpen = nav.classList.toggle("open");
          toggle.setAttribute("aria-expanded", String(isOpen));
        });
        // Close nav when clicking a link (useful on small screens)
        nav.addEventListener("click", (e) => {
          const t = e.target;
          if (t && t.tagName === "A" && nav.classList.contains("open")) {
            nav.classList.remove("open");
            toggle.setAttribute("aria-expanded", "false");
          }
        });
        // Close menu on Escape key
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && nav.classList.contains("open")) {
            nav.classList.remove("open");
            toggle.setAttribute("aria-expanded", "false");
          }
        });
        // Close when clicking outside of header/nav
        document.addEventListener("click", (e) => {
          if (!nav.classList.contains("open")) return;
          const header = document.querySelector("header");
          if (header && !header.contains(e.target)) {
            nav.classList.remove("open");
            toggle.setAttribute("aria-expanded", "false");
          }
        });
        // Keep the same toggle behavior across desktop and mobile: no auto-close on resize
      })();

      // Viewport and header measurements for stable mobile hero and anchor offset
      (function () {
        const root = document.documentElement;
        function setViewportVars() {
          const header = document.querySelector("header");
          const headerH = header ? header.offsetHeight : 70;
          root.style.setProperty("--header-h", headerH + "px");
          const vh =
            (window.visualViewport?.height || window.innerHeight) * 0.01;
          root.style.setProperty("--vh", vh + "px");
        }
        setViewportVars();
        window.addEventListener("load", setViewportVars);
        window.addEventListener("resize", setViewportVars);
        window.addEventListener("orientationchange", setViewportVars);
        if (window.visualViewport) {
          window.visualViewport.addEventListener("resize", setViewportVars);
        }
      })();

      // No in-page form submission needed; handled by external booking

      /* Animate Cards, Portfolio, Testimonials */
      const cards = document.querySelectorAll(
        ".service-card, .portfolio img, .testimonial-card, .stat"
      );
      function animateCards() {
        const windowBottom = window.innerHeight;
        cards.forEach((card) => {
          const rect = card.getBoundingClientRect();
          if (rect.top < windowBottom - 50) {
            card.classList.add("visible");
          }
        });
      }
      window.addEventListener("scroll", animateCards);
      window.addEventListener("load", animateCards);

      /* Animated Number Counters for Stats */
      const statNumbers = document.querySelectorAll(".stat-number");
      const animatedSet = new WeakSet();
      function animateStats() {
        const windowBottom = window.innerHeight;
        statNumbers.forEach((el) => {
          if (animatedSet.has(el)) return;
          const rect = el.getBoundingClientRect();
          if (rect.top < windowBottom - 50) {
            const isStatic = el.dataset.static === "true";
            if (isStatic) {
              // No animation for static year; just ensure it's visible
              animatedSet.add(el);
              return;
            }
            const target = parseFloat(el.dataset.target || "0");
            const suffix = el.dataset.suffix || "";
            const duration = 1200;
            const start = performance.now();
            function tick(now) {
              const t = Math.min(1, (now - start) / duration);
              const eased = 1 - Math.pow(1 - t, 3);
              const value = Math.floor(target * eased);
              el.textContent = value + suffix;
              if (t < 1) requestAnimationFrame(tick);
              else animatedSet.add(el);
            }
            requestAnimationFrame(tick);
          }
        });
      }
      window.addEventListener("scroll", animateStats);
      window.addEventListener("load", () => {
        animateCards();
        animateStats();
      });

      /* Platform-specific directions: Use Apple Maps on iOS */
      (function () {
        const btn = document.getElementById("getDirectionsBtn");
        if (!btn) return;
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        const isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;
        if (isIOS) {
          const appleDest = encodeURIComponent(
            "3360 Atlantic Ave, Long Beach, CA 90807"
          );
          btn.href = `https://maps.apple.com/?daddr=${appleDest}`;
        }
      })();

      /* Verify local hero image exists; fallback to Unsplash if not */
      (function () {
        const root = document.documentElement;
        const testImg = new Image();
        const localSrc = "assets/images/hero1.jpg";
        const fallback =
          'url("https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&w=1600&q=80")';
        testImg.onload = function () {
          // If it loads, ensure variable points to local
          root.style.setProperty("--hero-bg-url", `url("${localSrc}")`);
        };
        testImg.onerror = function () {
          // If it fails, set fallback
          root.style.setProperty("--hero-bg-url", fallback);
        };
        testImg.src =
          localSrc + (localSrc.indexOf("?") === -1 ? "?v=" + Date.now() : "");
      })();

      /* Verify local About image exists; fallback to a neutral background */
      (function () {
        const root = document.querySelector("#about");
        if (!root) return;
        const testImg = new Image();
        const localSrc = "assets/images/about-bg.jpg";
        const fallback =
          'url("https://images.unsplash.com/photo-1517048676732-d65bc937f952?auto=format&fit=crop&w=1600&q=80")';
        testImg.onload = function () {
          root.style.setProperty("--about-bg-url", `url("${localSrc}")`);
        };
        testImg.onerror = function () {
          root.style.setProperty("--about-bg-url", fallback);
        };
        testImg.src =
          localSrc + (localSrc.indexOf("?") === -1 ? "?v=" + Date.now() : "");
      })();

      /* On mobile, always start at the very top on refresh/reload (override scroll restoration) */
      (function () {
        const root = document.documentElement;
        function isMobile() {
          return window.innerWidth <= 768;
        }
        function goTop() {
          // Temporarily disable smooth scrolling to avoid animation
          root.classList.add("no-smooth");
          try {
            window.scrollTo({ top: 0, left: 0, behavior: "auto" });
          } catch (_) {
            window.scrollTo(0, 0);
          }
        }
        if (!isMobile()) return;
        // Ask browser not to restore scroll
        if ("scrollRestoration" in history) {
          try {
            history.scrollRestoration = "manual";
          } catch (_) {}
        }
        // Early attempt before layout settles
        requestAnimationFrame(goTop);
        // On load, retry to beat late restorations
        window.addEventListener("load", function () {
          goTop();
          setTimeout(goTop, 50);
          setTimeout(goTop, 250);
          setTimeout(() => root.classList.remove("no-smooth"), 600);
        });
        // Handle bfcache restores (Safari/iOS)
        window.addEventListener("pageshow", function (e) {
          if (e.persisted) setTimeout(goTop, 50);
        });
      })();

      // Helper to verify and set section background variables with fallback
      function setSectionBg(selector, varName, localSrc, fallbackUrl) {
        const el = document.querySelector(selector);
        if (!el) return;
        const img = new Image();
        let fallback;
        if (!fallbackUrl) {
          fallback = "";
        } else if (
          typeof fallbackUrl === "string" &&
          (fallbackUrl.startsWith("data:") || fallbackUrl.startsWith("url("))
        ) {
          fallback = fallbackUrl.startsWith("url(")
            ? fallbackUrl
            : `url(${fallbackUrl})`;
        } else {
          fallback = `url("${fallbackUrl}")`;
        }
        img.onload = () => el.style.setProperty(varName, `url("${localSrc}")`);
        img.onerror = () => el.style.setProperty(varName, fallback);
        img.src =
          localSrc + (localSrc.indexOf("?") === -1 ? "?v=" + Date.now() : "");
      }

      // Set backgrounds for the remaining sections
      setSectionBg(
        "#services",
        "--services-bg-url",
        "assets/images/services-bg.jpg",
        "https://images.unsplash.com/photo-1542362567-b07e54358753?auto=format&fit=crop&w=1600&q=80"
      );
      // Simple SVG placeholders as data URIs for sections, used if no local image is present
      function makePlaceholder(label) {
        const svg =
          `<svg xmlns='http://www.w3.org/2000/svg' width='1600' height='900'>` +
          `<defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>` +
          `<stop stop-color='#0b0b0b' offset='0'/><stop stop-color='#1a1a1a' offset='1'/></linearGradient></defs>` +
          `<rect width='100%' height='100%' fill='url(#g)'/>` +
          `<text x='50%' y='50%' fill='#ffd200' font-family='Montserrat, Arial, sans-serif' font-weight='700' font-size='64' text-anchor='middle' dominant-baseline='middle'>${label}</text>` +
          `</svg>`;
        return "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(svg);
      }
      const placeholderTestimonials = makePlaceholder("Testimonials");
      const placeholderPortfolio = makePlaceholder("Our Work");
      const placeholderSocial = makePlaceholder("Social");

      setSectionBg(
        "#testimonials",
        "--testimonials-bg-url",
        "assets/images/testimonials-bg.jpg",
        placeholderTestimonials
      );
      setSectionBg(
        "#achievements",
        "--achievements-bg-url",
        "assets/images/achievements-bg.jpg",
        "https://images.unsplash.com/photo-1506784983877-45594efa4cbe?auto=format&fit=crop&w=1600&q=80"
      );
      setSectionBg(
        "#portfolio",
        "--portfolio-bg-url",
        "assets/images/portfolio-bg.jpg",
        placeholderPortfolio
      );
      setSectionBg(
        "#social",
        "--social-bg-url",
        "assets/images/social-bg.jpg",
        placeholderSocial
      );
      setSectionBg(
        "#contact",
        "--contact-bg-url",
        "assets/images/contact-bg.jpg",
        "https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?auto=format&fit=crop&w=1600&q=80"
      );
      setSectionBg(
        "#locate",
        "--locate-bg-url",
        "assets/images/locate-bg.jpg",
        "https://images.unsplash.com/photo-1552519507-da3b142c6e3d?auto=format&fit=crop&w=1600&q=80"
      );
    </script>
  </body>
</html>

